<?xml version="1.0" encoding="utf-8" ?>
<project basedir="..">
    
    <property file="${ant.conf.dir}/java.properties" />
    
    <import file="common.xml" />
    
    <!--
        Creates a jar file out of classfiles created by Compile.
        Depends: Compilation.
    -->
    <target name="jar" depends="compile-java">
        <mkdir dir="${jar.dir}"/>
        <buildnumber file="build.num"/>
        <jar destfile="${jar.dir}/${jar.name}.jar" basedir="${build.classes.dir}">
            <manifest>
                <attribute name="Built-By" value="${project.author}"/>
                <attribute name="Main-Class" 
                value="${project.entrypoint.class.pkg}.${project.entrypoint.class.name}">
                </attribute>
                <attribute name="Implementation-Version" value="${project.version}-b${build.number}"/> 
                <attribute name="Built-Date" value="${TODAY}"/>
            </manifest>
        </jar>
    </target>

    <!--
        Runs the Jar file.
        Depends: JAR creation.
    -->
    <target name="run" depends="jar">
        <java jar="${jar.dir}/${jar.name}.jar" fork="true"/>
    </target>

</project>

